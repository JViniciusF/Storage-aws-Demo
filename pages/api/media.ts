// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import axios from "axios";
import { randomUUID } from "crypto";
import type { NextApiRequest, NextApiResponse } from "next";

export default async function handler(
    req: NextApiRequest,
    res: NextApiResponse
) {
    const ex = (req.query.fileType as string).split("/")[1];

    const Key = `${randomUUID()}.${ex}`;

    const data = await axios.post("https://dev.mkplace.com.br/storage/generateSignUrl", {
        fileName: "NomeDoArquivo.txt"
    }, {
        headers: {
            Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJncmFudFR5cGUiOiJjbGllbnRfY3JlZGVudGlhbHMiLCJhY2NvdW50SWQiOiJ0ZXN0ZSIsImNsaWVudElkIjoiNTlmMDZjMTUtOWVlYy00ODM2LThhYWUtZmRjZGM3NjdhYjhhIiwic2NvcGVzIjpbInNpdGUvYmFubmVycy9nZXRCeVNsdWciLCJjbXMvc2l0ZS9jcmVhdGUiLCJjbXMvc2l0ZS9yZWFkIiwiY21zL3NpdGUvdXBkYXRlIiwiY21zL3NpdGUvZGVsZXRlIiwiY21zL2Jhbm5lci9yZWFkIiwiY21zL2Jhbm5lci9jcmVhdGUiLCJjbXMvYmFubmVyL3VwZGF0ZSIsImNtcy9iYW5uZXIvZGVsZXRlIiwiY21zL2NvbnRhaW5lci9jcmVhdGUiLCJjbXMvY29udGFpbmVyL3JlYWQiLCJjbXMvY29udGFpbmVyL3VwZGF0ZSIsImNtcy9jb250YWluZXIvZGVsZXRlIiwiY21zL2NvbnRlbnRzL2NyZWF0ZSIsImNtcy9jb250ZW50cy9yZWFkIiwiY21zL2NvbnRlbnRzL3VwZGF0ZSIsImNtcy9jb250ZW50cy9kZWxldGUiLCJjbXMvY29udGVudHNUZW1wbGF0ZS9jcmVhdGUiLCJjbXMvY29udGVudHNUZW1wbGF0ZS9yZWFkIiwiY21zL2NvbnRlbnRzVGVtcGxhdGUvdXBkYXRlIiwiY21zL2NvbnRlbnRzVGVtcGxhdGUvZGVsZXRlIiwiY2F0YWxvZy9wcm9kdWN0L3JlYWQiLCJjYXRhbG9nL3Byb2R1Y3QvY3JlYXRlIiwiY2F0YWxvZy9wcm9kdWN0L2dldCIsImNhdGFsb2cvY29sbGVjdGlvbi9jcmVhdGUiLCJjYXRhbG9nL2NvbGxlY3Rpb24vcmVhZCIsImNhdGFsb2cvY29sbGVjdGlvbi9kZWxldGUiLCJjYXRhbG9nL2NvbGxlY3Rpb24vdXBkYXRlIiwiY2F0YWxvZy9jb2xsZWN0aW9uL3B1Ymxpc2giLCJjYXRhbG9nL2NvbGxlY3Rpb24vdW5wdWJsaXNoIiwiY2F0YWxvZy9yZXZpZXcvY3JlYXRlIiwiY2F0YWxvZy9yZXZpZXcvcmVhZCIsImNhdGFsb2cvcmV2aWV3L3VwZGF0ZSIsImNhdGFsb2cvY2F0ZWdvcnkvcmVhZCIsImNhdGFsb2cvY2F0ZWdvcnkvZGVsZXRlIiwiY2F0YWxvZy9jYXRlZ29yeS91cGRhdGUiLCJjYXRhbG9nL2NhdGVnb3J5L2NyZWF0ZSIsImNhdGFsb2cvcXVlc3Rpb25hbnN3ZXIvY3JlYXRlUXVlc3Rpb24iLCJjYXRhbG9nL3F1ZXN0aW9uYW5zd2VyL2NyZWF0ZUFuc3dlciIsImNhdGFsb2cvY2x1c3Rlci9jcmVhdGUiLCJjYXRhbG9nL2NsdXN0ZXIvcmVhZCIsImNhdGFsb2cvY2x1c3Rlci91cGRhdGUiLCJjYXRhbG9nL2NsdXN0ZXIvZGVsZXRlIiwiY2F0YWxvZy9jbHVzdGVyL3B1Ymxpc2giLCJjYXRhbG9nL2NsdXN0ZXIvdW5wdWJsaXNoIiwiY2F0YWxvZy9za3UvcmVhZCIsImNhdGFsb2cvc2t1L2RlbGV0ZSIsImNhdGFsb2cvc2t1L3VwZGF0ZSIsImNhdGFsb2cvc2t1L2NyZWF0ZSIsImNhdGFsb2cvc2t1L3B1Ymxpc2giLCJjYXRhbG9nL3NrdS91bnB1Ymxpc2giLCJjYXRhbG9nL3N1Z2dlc3Rpb24vcmVhZCIsImNhdGFsb2cvc3VnZ2VzdGlvbi9wcm9jZXNzIiwiY2F0YWxvZy9zdWdnZXN0aW9uL3VwZGF0ZSIsImNhdGFsb2cvc3VnZ2VzdGlvbi91bmxpbmsiLCJjYXRhbG9nL3JlcG9ydC9yZWFkIiwib2F1dGgvdG9rZW4vZ2V0Iiwib2F1dGgvdG9rZW4vZGVsZXRlIiwib2F1dGgvdXNlci93cml0ZSIsIm9hdXRoL3VzZXIvcmVhZCIsIm9hdXRoL3VzZXIvdG9rZW4iLCJvYXV0aC91c2VyL3JlY292ZXIiLCJvYXV0aC91c2VyL2dldEFsbCIsInBheW1lbnQvY3JlZGl0Y2FyZC9yZWFkIiwicGF5bWVudC9wcm92aWRlci9nZXQiLCJwYXltZW50L3Byb3ZpZGVyL2NyZWF0ZSIsInBheW1lbnQvcmVjZWl2ZXIvY3JlYXRlIiwicGF5bWVudC9yZWNlaXZlci9nZXQiLCJwYXltZW50L3JlY2VpdmVyL3VwZGF0ZSIsInBheW1lbnQvcmVjZWl2ZXIvZGVsZXRlIiwicGF5bWVudC90cmFuc2FjdGlvbi9jcmVhdGUiLCJwYXltZW50L3RyYW5zYWN0aW9uL3JlYWQiLCJwYXltZW50L3RyYW5zYWN0aW9uL3RpbWVsaW5lIiwicGF5bWVudC90cmFuc2FjdGlvbi9jYW5jZWxQYXltZW50IiwicGF5bWVudC93ZWJob29rL2xpc3QiLCJwYXltZW50L3dlYmhvb2svY3JlYXRlIiwicGF5bWVudC93ZWJob29rL2RlbGV0ZSIsInNob3BwaW5nL3NlbGxlci9jcmVhdGVTZWxsZXIiLCJzaG9wcGluZy9zZWxsZXIvcmVhZCIsInNob3BwaW5nL3NlbGxlci91cGRhdGUiLCJzaG9wcGluZy9zZWxsZXIvZGVsZXRlIiwic2hvcHBpbmcvb2ZmZXIvc3RvY2siLCJzaG9wcGluZy9vZmZlci9kZWxldGUiLCJzaG9wcGluZy9jb3Vwb24vY3JlYXRlIiwic2hvcHBpbmcvY291cG9uL3VwZGF0ZSIsInNob3BwaW5nL2NvdXBvbi9yZWFkIiwic2hvcHBpbmcvY291cG9uL2RlbGV0ZSIsInNob3BwaW5nL3JlbWluZE1lL2NyZWF0ZSIsInNob3BwaW5nL3JlbWluZE1lL3JlYWQiLCJzaG9wcGluZy9yZW1pbmRNZS9kZWxldGUiLCJzaG9wcGluZy9wcm92aWRlci9jcmVhdGUiLCJzaG9wcGluZy9wcm92aWRlci91cGRhdGUiLCJzaG9wcGluZy9wcm92aWRlci9yZWFkIiwic2hvcHBpbmcvcHJvdmlkZXIvZGVsZXRlIiwic2hvcHBpbmcvc3RvcmUvdXBkYXRlU3RvcmUiLCJzYWxlcy9vcmRlci93cml0ZSIsInNhbGVzL29yZGVyL3JlYWQiLCJzYWxlcy93ZWJob29rL3JlYWQiLCJmcmVpZ2h0L3Byb3ZpZGVyL2NyZWF0ZSIsImZyZWlnaHQvcHJvdmlkZXIvcmVhZCIsImZyZWlnaHQvcHJvdmlkZXIvZGVsZXRlIiwiY3VzdG9tZXIvbmV3c2xldHRlci9nZXQiLCJjdXN0b21lci9wcm92aWRlci9jcmVhdGUiLCJjdXN0b21lci9wcm92aWRlci9yZWFkIiwiY3VzdG9tZXIvcHJvdmlkZXIvZGVsZXRlIiwiYWdncmVnYXRvci9wcm92aWRlci9jcmVhdGUiLCJhZ2dyZWdhdG9yL3Byb3ZpZGVyL3JlYWQiLCJhZ2dyZWdhdG9yL3Byb3ZpZGVyL2RlbGV0ZSIsInN0b3JhZ2UvZmlsZS91cGxvYWQiLCJtYWdhbHUvY29uZmlndXJhdGlvbi9yZWFkIiwic2VhcmNoaW5kZXhlci9jcmVkZW50aWFscy9jcmVhdGUiLCJzZWFyY2hpbmRleGVyL2NyZWRlbnRpYWxzL3JlYWQiLCJzZWFyY2hpbmRleGVyL2NyZWRlbnRpYWxzL3VwZGF0ZSIsInNlYXJjaGluZGV4ZXIvY3JlZGVudGlhbHMvZGVsZXRlIiwic2VhcmNoL29yZGVyL3JlYWQiLCJwcm9tb3Rlci9wcm9tb3Rlci9jcmVhdGUiLCJwcm9tb3Rlci9wcm9tb3Rlci9yZWFkIiwicHJvbW90ZXIvcHJvbW90ZXIvZGVsZXRlIiwicHJvbW90ZXIvcHJvbW90ZXIvZ2VuZXJhdGUiLCJiaS1zZXJ2aWNlcy9yZXBvcnQvY3JlYXRlIiwiYmktc2VydmljZXMvcmVwb3J0L3JlYWQiLCJiaS1zZXJ2aWNlcy9yZXBvcnQvdXBkYXRlIiwiYmktc2VydmljZXMvcmVwb3J0L2RlbGV0ZSIsInNwcmVhZHNoZWV0L3RlbXBsYXRlL2NyZWF0ZSIsInNwcmVhZHNoZWV0L3RlbXBsYXRlL3JlYWQiLCJzcHJlYWRzaGVldC90ZW1wbGF0ZS91cGRhdGUiLCJzcHJlYWRzaGVldC90ZW1wbGF0ZS9kZWxldGUiLCJzcHJlYWRzaGVldC90ZW1wbGF0ZS9jb25maWciLCJzcHJlYWRzaGVldC9saWJyYXJpYW4vcmVhZCIsInNwcmVhZHNoZWV0L2xpYnJhcmlhbi9pbXBvcnQiLCJzcHJlYWRzaGVldC9saWJyYXJpYW4vZXhwb3J0IiwicHJvbW90aW9uL3Byb21vdGlvbi9jcmVhdGUiLCJwcm9tb3Rpb24vcHJvbW90aW9uL3JlYWQiLCJwcm9tb3Rpb24vcHJvbW90aW9uL3VwZGF0ZSIsInByb21vdGlvbi9wcm9tb3Rpb24vZGVsZXRlIiwicHJvbW90aW9uL2NvdXBvbi9jcmVhdGUiLCJwcm9tb3Rpb24vY291cG9uL3JlYWQiLCJwcm9tb3Rpb24vY291cG9uL3VwZGF0ZSIsInByb21vdGlvbi9jb3Vwb24vZGVsZXRlIiwiY2FydFJlbWluZGVyL3Byb3ZpZGVyL2NyZWF0ZSIsImNhcnRSZW1pbmRlci9wcm92aWRlci9yZWFkIiwiY2FydFJlbWluZGVyL3Byb3ZpZGVyL3VwZGF0ZSIsImNhcnRSZW1pbmRlci9wcm92aWRlci9kZWxldGUiLCJwcm9maWxlOnN0b3JlSWQ9dGVzdGUiLCJwcm9maWxlOmFjY291bnRJZD10ZXN0ZSIsInByb2ZpbGU6Y2xpZW50SWQ9NTlmMDZjMTUtOWVlYy00ODM2LThhYWUtZmRjZGM3NjdhYjhhIl0sImV4cGlyZXNBdCI6MCwiaWF0IjoxNjc1MTc2NzY3fQ.ELYOpdi4smGvQvMpYBttb1YKw68cg3f6_vmGa8nwwyM"
        }
    });

    res.status(200).json(data);
}
